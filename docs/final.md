---
layout: default
title: Final
---

## Video

There's a YouTube video embeded here

## Project Summary

In the modern world, people use autonomous robots to do some work. Autonomous vacuum robots today commonly exist in many homes, it uses sensors for obstacle detection, a new feature of cliff detection has been used as an additional sensing technology for safety. Under the development of technology, we believe that auto vacuum robots should have the ability to detect cliff and down the stairs safely. 

Our project is a downhill survival game in Minecraft, which asks the agent to go down the map as many valid levels (1-5 floors) as possible and maximize the reward. The agent is able to look down five floors in order to determine the next step. Once the player reaches the bottom of the map, the map will be regenerated. Rewards are given for each level the player goes down, and penalties are applied for touching the map boundary and dropping more than five levels at a time. The agent is expected to have higher rewards for optimization (considered to be a combination of less falling damages and fewer steps). 

Since the agent needs to maximize the reward which is also means to minimize the damage from falling down, and the observation for the agent is limited, we need to use machine learning algorithms to train the agent find the best way to reach the goal.

```python
def falling_reward(self, cur, prev):
    falldown = prev[1] - cur[1] # One level is (prev[1] - cur[1])/3

    return -15 if falldown >= 15 else math.ceil(falldown*falldown/10)
```

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="751px" viewBox="-0.5 -0.5 751 701" style="max-width:100%;max-height:701px;"><defs/><g><rect x="160" y="60" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="330" y="140" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="200" y="220" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="40" y="300" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="120" y="380" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="265" y="460" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><path d="M 200 60 Q 300 -10 330 50 Q 360 110 367.99 133.96" fill="none" stroke="#30d158" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 369.65 138.94 L 364.11 133.41 L 367.99 133.96 L 370.75 131.19 Z" fill="#30d158" stroke="#30d158" stroke-miterlimit="10" pointer-events="all"/><path d="M 200 60 Q 300 10 261.19 213.74" fill="none" stroke="#30d158" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 260.21 218.9 L 258.08 211.37 L 261.19 213.74 L 264.96 212.68 Z" fill="#30d158" stroke="#30d158" stroke-miterlimit="10" pointer-events="all"/><path d="M 200 60 Q 80 10 75 120 Q 70 230 79.1 293.7" fill="none" stroke="#30d158" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 79.84 298.89 L 75.39 292.46 L 79.1 293.7 L 82.32 291.47 Z" fill="#30d158" stroke="#30d158" stroke-miterlimit="10" pointer-events="all"/><path d="M 200 60 Q 180 20 155 30 Q 130 40 135 115 Q 140 190 159.33 373.67" fill="none" stroke="#30d158" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 159.88 378.89 L 155.67 372.29 L 159.33 373.67 L 162.63 371.56 Z" fill="#30d158" stroke="#30d158" stroke-miterlimit="10" pointer-events="all"/><path d="M 200 60 Q 280 20 305 110 Q 330 200 325.12 453.63" fill="none" stroke="#30d158" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 325.02 458.88 L 321.66 451.82 L 325.12 453.63 L 328.66 451.95 Z" fill="#30d158" stroke="#30d158" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="205" cy="7.5" rx="7.5" ry="7.5" fill="#5e5ce6" stroke="#000000" pointer-events="all"/><path d="M 205 15 L 205 40 M 205 20 L 190 20 M 205 20 L 220 20 M 205 40 L 190 60 M 205 40 L 220 60" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="390" y="110" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 120px; margin-left: 391px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 1</font></div></div></div></foreignObject><text x="415" y="124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 1</text></switch></g><rect x="190" y="190" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 200px; margin-left: 191px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 2</font></div></div></div></foreignObject><text x="215" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 2</text></switch></g><rect x="0" y="260" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 270px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 3</font></div></div></div></foreignObject><text x="25" y="274" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 3</text></switch></g><rect x="170" y="350" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 360px; margin-left: 171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 4</font></div></div></div></foreignObject><text x="195" y="364" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 4</text></switch></g><rect x="340" y="420" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 430px; margin-left: 341px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 5</font></div></div></div></foreignObject><text x="365" y="434" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 5</text></switch></g><rect x="520" y="60" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="620" y="140" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="620" y="220" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="650" y="380" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="625" y="460" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><ellipse cx="565" cy="7.5" rx="7.5" ry="7.5" fill="#5e5ce6" stroke="#000000" pointer-events="all"/><path d="M 565 15 L 565 40 M 565 20 L 550 20 M 565 20 L 580 20 M 565 40 L 550 60 M 565 40 L 580 60" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="700" y="110" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 120px; margin-left: 701px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 1</font></div></div></div></foreignObject><text x="725" y="124" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 1</text></switch></g><rect x="700" y="190" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 200px; margin-left: 701px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 2</font></div></div></div></foreignObject><text x="725" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 2</text></switch></g><rect x="700" y="270" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 280px; margin-left: 701px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 3</font></div></div></div></foreignObject><text x="725" y="284" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 3</text></switch></g><rect x="700" y="350" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 360px; margin-left: 701px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 4</font></div></div></div></foreignObject><text x="725" y="364" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 4</text></switch></g><rect x="700" y="430" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 440px; margin-left: 701px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#30d158">Level 5</font></div></div></div></foreignObject><text x="725" y="444" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 5</text></switch></g><rect x="590" y="300" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="470" y="540" width="80" height="20" fill="#5e5ce6" stroke="#5e5ce6" pointer-events="all"/><rect x="570" y="540" width="50" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 48px; height: 1px; padding-top: 550px; margin-left: 571px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#ff453a">Level 6</font></div></div></div></foreignObject><text x="595" y="554" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Level 6</text></switch></g><path d="M 560 60 Q 480 10 470 140 Q 460 270 489.3 533.67" fill="none" stroke="#ff453a" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 489.88 538.89 L 485.62 532.32 L 489.3 533.67 L 492.58 531.55 Z" fill="#ff453a" stroke="#ff453a" stroke-miterlimit="10" pointer-events="all"/><path d="M 155.36 668.37 C 156.27 664.99 158.54 662.17 161.62 660.6 C 164.69 659.04 168.28 658.88 171.48 660.17 C 176.13 662.47 179.74 666.51 181.55 671.45 C 189.86 647.41 202.49 625.16 218.81 605.83 C 223.44 601.55 229.91 600 235.93 601.73 C 237.47 601.98 238.77 603.01 239.39 604.47 C 240 605.93 239.84 607.6 238.95 608.91 C 216.77 634.4 200.28 664.48 190.61 697.08 C 184.91 700 178.18 700 172.48 697.08 C 168.18 687.34 162.4 678.35 155.36 670.42 C 155 669.79 155 669.01 155.36 668.37 Z" fill="#30d158" stroke="#30d158" stroke-miterlimit="10" pointer-events="all"/><path d="M 520 600 L 549.17 600 L 570 629.59 L 590.83 600 L 620 600 L 584.58 650 L 620 700 L 590.83 700 L 570 670.41 L 549.17 700 L 520 700 L 553.33 650 Z" fill="#ff453a" stroke="#ff453a" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

# Approaches

TBC

## Evaluation

TBC

## References

#### [XML Schema Documentation](http://microsoft.github.io/malmo/0.14.0/Schemas/MissionHandlers.html)

#### [Project Malmo](https://github.com/microsoft/malmo)

#### [TA Kolby Nottingham's Code for Assignment 2 with RLlib](https://campuspro-uploads.s3.us-west-2.amazonaws.com/ad12d7f8-a456-4244-bd96-18be6a728aca/662f51cc-2587-4f7f-b5af-a59aff45727c/assignment2_rllib_cont.py)

#### [Proximal Policy Optimization (PPO) in RLlib in Ray](https://docs.ray.io/en/latest/rllib-algorithms.html#ppo)

